{"version":3,"sources":["webpack:///./app/js/requestSource.js"],"names":["newsSourceStorage","Map","__webpack_exports__","sourceId","cachedSourceInfo","get","Date","time","__WEBPACK_IMPORTED_MODULE_0__config_js__","Promise","resolve","articles","fetch","then","response","json","set","catch","error","alert"],"mappings":"iHAEIA,EAAoB,IAAIC,IAC5BC,EAAA,iBAAeC,GACd,IAAIC,EAAmBJ,EAAkBK,IAAIF,GAC7C,OAAIC,GAAqB,IAAIE,KAAOF,EAAiBG,KAAQC,EAAA,EACrDC,QAAQC,QAAQN,EAAiBO,UAEjCC,sDAAsDT,EAAtD,WAAyEK,EAAA,GAC9EK,KAAK,SAAAC,GACL,OAAOA,EAASC,SAEhBF,KAAK,SAAAC,GAKL,OAJAd,EAAkBgB,IAAIb,GACNQ,SAAUG,EAASH,SACnBJ,KAAM,IAAID,OAEnBQ,EAASH,WAEhBM,MAAM,SAAAC,GACNC,MAAM","file":"request.bundle.js","sourcesContent":["import {API_KEY, INFO_CACHE_TIME} from './config.js';\r\n\r\nlet newsSourceStorage = new Map();\r\nexport default sourceId => {\r\n\tlet cachedSourceInfo = newsSourceStorage.get(sourceId);\r\n\tif (cachedSourceInfo && (new Date - cachedSourceInfo.time) < INFO_CACHE_TIME) {\r\n\t\treturn Promise.resolve(cachedSourceInfo.articles);\r\n\t} else {\r\n\t\treturn fetch(`https://newsapi.org/v2/top-headlines?sources=${sourceId}&apiKey=${API_KEY}`)\r\n\t\t\t.then(response => {\r\n\t\t\t\treturn response.json();\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tnewsSourceStorage.set(sourceId, {\r\n                    articles: response.articles,\r\n                    time: new Date()\r\n                });\r\n\t\t\t\treturn response.articles;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\talert('Something went wrong');\r\n\t\t\t\tconsole.log(error);\r\n        \t});\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/requestSource.js"],"sourceRoot":""}